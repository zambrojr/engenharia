module.exports=function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=6)}([function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"updateBoxLayout",function(){return i}),n.d(e,"updateBoxPosition",function(){return r}),n.d(e,"positionsAreColliding",function(){return a}),n.d(e,"isFree",function(){return u}),n.d(e,"bubbleUp",function(){return s}),n.d(e,"moveBoxToFreePlace",function(){return d}),n.d(e,"sortLayout",function(){return l}),n.d(e,"layoutBubbleUp",function(){return c}),n.d(e,"positionToPixels",function(){return f}),n.d(e,"getLayoutSize",function(){return g}),n.d(e,"matchesSelector",function(){return p}),n.d(e,"layoutHasCollisions",function(){return y}),n.d(e,"fixLayout",function(){return h});var i=function(t,e){return Object.assign({},t,e)},r=function(t,e){return i(t,{position:Object.assign({},t.position,e)})},a=function(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.y+t.h>e.y},u=function(t,e){for(var n=0;n<t.length;n++)if(a(t[n].position,e))return!1;return!0},s=function(t,e){do{e=r(e,{y:e.position.y-1})}while(u(t,e.position)&&e.position.y>=0);return r(e,{y:e.position.y+1})},d=function(t,e,n){for(n&&(e=s(t,e));!u(t,e.position);)e=r(e,{y:e.position.y+1});return e},l=function(t){return[].concat(o(t)).sort(function(t,e){return t.hidden&&!e.hidden?1:!t.hidden&&e.hidden?-1:t.pinned&&!e.pinned?-1:!t.pinned&&e.pinned?1:t.position.y<e.position.y?-1:t.position.y>e.position.y?1:t.position.x<e.position.x?-1:t.position.x>e.position.x?1:0})},c=function(t){t=l(t);var e=[];return t.forEach(function(t){e.push(s(e,t))}),e},f=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:t.x*e.w+t.x*n+o,y:t.y*e.h+t.y*n+o,w:t.w*e.w+(t.w-1)*n,h:t.h*e.h+(t.h-1)*n}},g=function(t){return{w:t.reduce(function(t,e){return e.hidden?t:Math.max(t,e.position.x+e.position.w)},0),h:t.reduce(function(t,e){return e.hidden?t:Math.max(t,e.position.y+e.position.h)},0)}},p=function(t,e){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),this)}).call(t,e)},y=function(t){for(var e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++)if(a(t[e].position,t[n].position))return!0;return!1},h=function(t,e){t=l(t);var n=[];return t.forEach(function(t){n.push(d(n,t,e))}),n}},function(t,e,n){"use strict";function o(t){n(9)}var i=n(3);n.d(e,"a",function(){return i.a});var r=n(12),a=n(2),u=o,s=a(i.b,r.a,!1,u,null,null);e.b=s.exports},function(t,e){t.exports=function(t,e,n,o,i,r){var a,u=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(a=t,u=t.default);var d="function"==typeof u?u.options:u;e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),n&&(d.functional=!0),i&&(d._scopeId=i);var l;if(r?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=l):o&&(l=o),l){var c=d.functional,f=c?d.render:d.beforeCreate;c?(d._injectStyles=l,d.render=function(t,e){return l.call(e),f(t,e)}):d.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:u,options:d}}},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n.d(e,"a",function(){return a});var i=n(4),r=n(0),a=new Set;e.b={name:"DndGridContainer",components:{Box:i.a},props:{layout:{type:Array,required:!0},cellSize:{type:Object,default:function(){return{w:100,h:100}}},maxColumnCount:{type:Number,default:1/0},maxRowCount:{type:Number,default:1/0},margin:{type:Number,default:5},outerMargin:{type:Number,default:0},bubbleUp:{type:Boolean,default:!1},autoAddLayoutForNewBox:{type:Boolean,required:!1,default:!0},defaultSize:{type:Object,required:!1,default:function(){return{w:1,h:1}}},fixLayoutOnLoad:{type:Boolean,required:!1,default:!0}},watch:{layout:function(t){this.fixLayoutOnLoad&&r.layoutHasCollisions(t)&&this.updateLayout(r.fixLayout(t,this.bubbleUp))}},data:function(){return{placeholder:{hidden:!0,position:{x:0,y:0,w:1,h:1}},dragging:{boxLayout:null,offset:{x:0,y:0}},resizing:{boxLayout:null,offset:{x:0,y:0}},isMounted:!1}},computed:{style:function(){var t=r.getLayoutSize(this.layout);return{minWidth:t.w*this.cellSize.w+(t.w-1)*this.margin+2*this.outerMargin+"px",minHeight:t.h*this.cellSize.h+(t.h-1)*this.margin+2*this.outerMargin+"px"}},pinnedLayout:function(){return this.layout.filter(function(t){return t.pinned})},layoutMap:function(){var t=new Map;return this.layout.forEach(function(e){t.set(e.id,e)}),t}},methods:{getBoxLayoutById:function(t){return"::placeholder::"===t?this.placeholder:this.layoutMap.get(t)},getPixelPositionById:function(t){if(this.dragging.boxLayout&&this.dragging.boxLayout.id===t){var e=r.positionToPixels(this.dragging.boxLayout.position,this.cellSize,this.margin,this.outerMargin);return e.x+=this.dragging.offset.x,e.y+=this.dragging.offset.y,e}if(this.resizing.boxLayout&&this.resizing.boxLayout.id===t){var n=r.positionToPixels(this.resizing.boxLayout.position,this.cellSize,this.margin,this.outerMargin);return n.w+=this.resizing.offset.x,n.h+=this.resizing.offset.y,n}var o=this.getBoxLayoutById(t);return r.positionToPixels(o.position,this.cellSize,this.margin,this.outerMargin)},isBoxVisible:function(t){var e=this.getBoxLayoutById(t);return e&&!e.hidden},getPositionByPixel:function(t,e){return{x:Math.round(t/(this.cellSize.w+this.margin)),y:Math.round(e/(this.cellSize.h+this.margin))}},updateLayout:function(t){this.$emit("update:layout",t)},registerBox:function(t){this.enableResizing(t),this.enableDragging(t),this.isMounted&&this.autoAddLayoutForNewBox&&this.createBoxLayout(t.$props.boxId)},unregisterBox:function(t){},enableDragging:function(t){var e,n=this,o=!1,i=function(t,e){return t+n.dragging.boxLayout.position.w>n.maxColumnCount?t=n.maxColumnCount-n.dragging.boxLayout.position.w:t<0&&(t=0),e+n.dragging.boxLayout.position.h>n.maxRowCount?e=n.maxRowCount-n.dragging.boxLayout.position.h:e<0&&(e=0),{targetX:t,targetY:e}};t.$on("dragStart",function(i){var a=n.getBoxLayoutById(t.boxId);a.pinned||(o=!0,n.dragging.boxLayout=a,n.placeholder=Object.assign({},n.dragging.boxLayout),e=r.sortLayout(n.layout),n.$emit("drag:start",e))}),t.$on("dragUpdate",function(t){if(o){n.dragging.offset.x=t.offset.x,n.dragging.offset.y=t.offset.y;var a=n.getPositionByPixel(t.offset.x,t.offset.y);if(r.isFree(n.pinnedLayout,Object.assign({},n.dragging.boxLayout.position,{x:n.dragging.boxLayout.position.x+a.x,y:n.dragging.boxLayout.position.y+a.y}))){var u=i(n.dragging.boxLayout.position.x+a.x,n.dragging.boxLayout.position.y+a.y),s=u.targetX,d=u.targetY;if(n.placeholder.position.x!==s||n.placeholder.position.y!==d){n.placeholder=r.updateBoxPosition(n.placeholder,{x:s,y:d});var l=[n.placeholder];e.forEach(function(t){t.id!==n.dragging.boxLayout.id&&l.push(r.moveBoxToFreePlace(l,t,n.bubbleUp))}),n.bubbleUp&&(l=r.layoutBubbleUp(l),n.placeholder=l.find(function(t){return t.id===n.dragging.boxLayout.id})),n.updateLayout(l),n.$emit("drag:update",l)}}}}),t.$on("dragEnd",function(t){if(o){var a=n.getPositionByPixel(t.offset.x,t.offset.y);if(r.isFree(n.pinnedLayout,Object.assign({},n.dragging.boxLayout.position,{x:n.dragging.boxLayout.position.x+a.x,y:n.dragging.boxLayout.position.y+a.y}))){var u=i(n.dragging.boxLayout.position.x+a.x,n.dragging.boxLayout.position.y+a.y),s=u.targetX,d=u.targetY;n.placeholder=r.updateBoxPosition(n.placeholder,{x:s,y:d})}n.dragging.boxLayout=r.updateBoxPosition(n.dragging.boxLayout,{x:n.placeholder.position.x,y:n.placeholder.position.y});var l=[n.dragging.boxLayout];e.forEach(function(t){t.id!==n.dragging.boxLayout.id&&l.push(r.moveBoxToFreePlace(l,t,n.bubbleUp))}),n.bubbleUp&&(l=r.layoutBubbleUp(l)),n.updateLayout(l),n.dragging.boxLayout=null,n.dragging.offset.x=0,n.dragging.offset.y=0,n.placeholder.hidden=!0,o=!1,n.$emit("drag:end",l)}})},enableResizing:function(t){var e,n=this,o=!1,i=function(t,e){return n.resizing.boxLayout.position.x+t>n.maxColumnCount?t=n.maxColumnCount-n.resizing.boxLayout.position.x:t<1&&(t=1),n.resizing.boxLayout.position.y+e>n.maxRowCount?e=n.maxRowCount-n.resizing.boxLayout.position.y:e<1&&(e=1),{targetW:t,targetH:e}};t.$on("resizeStart",function(i){var a=n.getBoxLayoutById(t.boxId);a.pinned||(o=!0,n.resizing.boxLayout=a,n.placeholder=Object.assign({},n.resizing.boxLayout),e=r.sortLayout(n.layout),n.$emit("resize:start",e))}),t.$on("resizeUpdate",function(t){if(o){n.resizing.offset.x=t.offset.x,n.resizing.offset.y=t.offset.y;var a=n.getPositionByPixel(t.offset.x,t.offset.y);if(r.isFree(n.pinnedLayout,Object.assign({},n.resizing.boxLayout.position,{w:n.resizing.boxLayout.position.w+a.x,h:n.resizing.boxLayout.position.h+a.y}))){var u=i(n.resizing.boxLayout.position.w+a.x,n.resizing.boxLayout.position.h+a.y),s=u.targetW,d=u.targetH;if(n.placeholder.position.w!==s||n.placeholder.position.h!==d){n.placeholder=r.updateBoxPosition(n.placeholder,{w:s,h:d});var l=[n.placeholder];e.forEach(function(t){t.id!==n.resizing.boxLayout.id&&l.push(r.moveBoxToFreePlace(l,t,n.bubbleUp))}),n.bubbleUp&&(l=r.layoutBubbleUp(l),n.placeholder=l.find(function(t){return t.id===n.resizing.boxLayout.id})),n.updateLayout(l),n.$emit("resize:update",l)}}}}),t.$on("resizeEnd",function(t){if(o){var a=n.getPositionByPixel(t.offset.x,t.offset.y);if(r.isFree(n.pinnedLayout,Object.assign({},n.resizing.boxLayout.position,{w:n.resizing.boxLayout.position.w+a.x,h:n.resizing.boxLayout.position.h+a.y}))){var u=i(n.resizing.boxLayout.position.w+a.x,n.resizing.boxLayout.position.h+a.y),s=u.targetW,d=u.targetH;n.placeholder=r.updateBoxPosition(n.placeholder,{w:s,h:d})}n.resizing.boxLayout=r.updateBoxPosition(n.resizing.boxLayout,{w:n.placeholder.position.w,h:n.placeholder.position.h});var l=[n.resizing.boxLayout];e.forEach(function(t){t.id!==n.resizing.boxLayout.id&&l.push(r.moveBoxToFreePlace(l,t,n.bubbleUp))}),n.bubbleUp&&(l=r.layoutBubbleUp(l)),n.updateLayout(l),n.resizing.boxLayout=null,n.resizing.offset.x=0,n.resizing.offset.y=0,n.placeholder.hidden=!0,n.$emit("resize:end",l)}})},createBoxLayout:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n=n.filter(function(e){return!t.getBoxLayoutById(e)}),n.length){var a=[].concat(o(this.layout));n.forEach(function(e){a.push(r.moveBoxToFreePlace(a,{id:e,hidden:!1,position:Object.assign({x:0,y:0},t.defaultSize)},t.bubbleUp))}),this.updateLayout(a)}}},created:function(){a.add(this)},mounted:function(){this.isMounted=!0;var t=this.$children.map(function(t){return t.$props.boxId});this.createBoxLayout.apply(this,o(t))},beforeDestroy:function(){a.delete(this)}}},function(t,e,n){"use strict";function o(t){n(10)}var i=n(5),r=n(11),a=n(2),u=o,s=a(i.a,r.a,!1,u,null,null);e.a=s.exports},function(t,e,n){"use strict";var o=n(0),i=n(1);e.a={name:"DndGridBox",props:{boxId:{required:!0},dragSelector:{type:String,default:"*"}},data:function(){return{container:null,dragging:!1,resizing:!1}},computed:{style:function(){if(this.container&&this.container.isBoxVisible(this.boxId)){var t=this.container.getPixelPositionById(this.boxId);return{display:"block",width:t.w+"px",height:t.h+"px",transform:"translate("+t.x+"px, "+t.y+"px)"}}return{display:"none"}},classes:function(){return{"dnd-grid-box":!0,dragging:this.dragging,resizing:this.resizing}}},methods:{findContainer:function(){for(var t=this;t.$parent;)if(t=t.$parent,i.a.has(t))return t;return null}},mounted:function(){var t=this;if(this.container=this.findContainer(),!this.container)throw new Error("Can not find container");this.container.registerBox(this),this.$dragHandle=this.$el||this.$refs.dragHandle,this.$dragHandle.addEventListener("mousedown",function(e){if(o.matchesSelector(e.target,t.dragSelector)){e.preventDefault(),t.dragging=!0,t.$emit("dragStart");var n=e.clientX,i=e.clientY,r=function e(o){window.removeEventListener("mouseup",e,!0),window.removeEventListener("mousemove",a,!0),t.dragging=!1;var r={x:o.clientX-n,y:o.clientY-i};t.$emit("dragEnd",{offset:r})},a=function(e){var o={x:e.clientX-n,y:e.clientY-i};t.$emit("dragUpdate",{offset:o})};window.addEventListener("mouseup",r,!0),window.addEventListener("mousemove",a,!0)}}),this.$resizeHandle=this.$refs.resizeHandle,this.$resizeHandle&&this.$resizeHandle.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t.resizing=!0,t.$emit("resizeStart");var n=e.clientX,o=e.clientY,i=function e(i){window.removeEventListener("mouseup",e,!0),window.removeEventListener("mousemove",r,!0),t.resizing=!1;var a={x:i.clientX-n,y:i.clientY-o};t.$emit("resizeEnd",{offset:a})},r=function(e){var i={x:e.clientX-n,y:e.clientY-o};t.$emit("resizeUpdate",{offset:i})};window.addEventListener("mouseup",i,!0),window.addEventListener("mousemove",r,!0)})},beforeDestroy:function(){this.container&&this.container.unregisterBox(this)}}},function(t,e,n){t.exports=n(7)},function(t,e,n){var o=n(8);t.exports=o;for(var i in o)(function(t){t.install=function(e){return e.component(t.name,t)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(t)})(o[i])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(4),r=n(0);n.d(e,"Container",function(){return o.b}),n.d(e,"Box",function(){return i.a}),n.d(e,"utils",function(){return r})},function(t,e){},function(t,e){},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"dragHandle",class:t.classes,style:t.style},[t._t("default"),t._v(" "),n("div",{ref:"resizeHandle",staticClass:"resize-handle"})],2)},i=[],r={render:o,staticRenderFns:i};e.a=r},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dnd-grid-container",style:t.style},[t._t("default"),t._v(" "),n("box",{staticClass:"placeholder",attrs:{boxId:"::placeholder::"}})],2)},i=[],r={render:o,staticRenderFns:i};e.a=r}]);